<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¯Ø±Ø³ 3: Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ§Øª</title>
    <!-- Tailwind CSS for styling and responsiveness -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- KaTeX for beautiful math symbols -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>

    <style>
        /* Define Royal Indigo Palette */
        :root {
            --color-indigo-dark: #1e3a8a; /* Deep Indigo for main titles and accents */
            --color-indigo-royal: #2c5282; /* Royal Blue for buttons and primary elements */
            --color-light-blue: #f0f8ff; /* Very light cool blue background for boxes */
            --color-accent-gold: #fbbf24; /* Amber/Gold for highlights */
        }

        /* Import suitable fonts for Arabic and English text */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+Arabic:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans Arabic', 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: #f4f7fa; 
            text-align: right; /* Default text alignment for Arabic content */
        }
        
        /* Override for LTR structure elements */
        .ltr-text {
            direction: ltr;
            text-align: left;
        }

        /* Set base styles for the body and the main container */
        .container {
            width: 100%;
            max-width: 900px;
            background-color: #fff;
            padding: 0; 
            border-radius: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            margin: 2rem auto;
            flex-grow: 1;
            overflow: hidden; 
        }

        /* Standard Section Styling */
        .lesson-box {
            background-color: var(--color-light-blue);
            /* LTR: border on the left */
            border-left: 6px solid var(--color-indigo-dark);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-indigo-dark);
            margin-bottom: 0.75rem;
        }
        .section-text {
            font-size: 1.15rem;
            line-height: 1.7;
            color: #4a5568;
        }

        /* Styling for the explore dots pattern */
        .dot {
            width: 15px;
            height: 15px;
            background-color: var(--color-indigo-royal);
            border-radius: 50%;
            margin: 2px;
            display: inline-block;
        }
        .shape {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            min-height: 100px;
            margin-bottom: 1rem;
        }

        /* Styling for the sequence definition box */
        .definition-box {
            border: 1px solid var(--color-accent-gold);
            background-color: #fff8e8;
            padding: 1.5rem;
            margin: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        /* Example 1 Styling */
        .example-card {
            background-color: #fff;
            border: 2px solid var(--color-indigo-royal);
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 2rem;
        }
        .term-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 0.5rem;
            position: relative;
        }
        .term-number {
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--color-indigo-dark);
            background-color: #e3f2fd;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            min-width: 60px;
            text-align: center;
        }
        
        /* LTR Flow: Difference is positioned to the right of the current term, above the gap */
        .difference-line {
            position: absolute;
            top: -20px;
            color: #d97706; /* Amber color for difference */
            font-size: 1rem;
            font-weight: 700;
            left: 100%; 
            margin-left: 0.25rem; 
            transform: translateX(-50%); 
            width: 40px; 
            text-align: center;
        }
        
        /* Check Understanding Interactivity Styling */
        .check-box {
            background-color: #e6ffed; /* Light green for check box */
            border-left: 6px solid #2f855a;
            padding: 1.5rem;
            margin: 2rem;
            border-radius: 1rem;
        }
        
        /* Explicitly set direction for all KaTeX rendered elements to LTR */
        .katex {
            direction: ltr !important;
            display: inline-block;
        }
        
        .math-expr {
            font-size: 1.3rem;
            font-weight: bold;
            color: #1e3a8a;
            direction: ltr; 
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                margin: 0.5rem auto;
            }
            .lesson-box, .definition-box, .example-card, .check-box {
                margin: 1rem;
            }
            .term-number {
                font-size: 1rem;
                padding: 0.4rem 0.8rem;
            }
            .term-row {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Main Content Container -->
    <main class="container">
        <!-- Professional Header (Deep Indigo) - Title: Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ§Øª -->
        <header class="bg-[#1e3a8a] text-white py-10 sm:py-12 text-center shadow-lg relative overflow-hidden">
            <!-- Decorative gold bar at the bottom -->
            <div class="absolute inset-x-0 bottom-0 h-1 bg-yellow-400"></div>
            <h1 class="text-4xl sm:text-5xl font-extrabold tracking-wide">Ø§Ù„Ø¯Ø±Ø³ 3: Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ§Øª</h1>
        </header>

        <!-- Lesson Idea and Vocabulary Section -->
        <div class="lesson-box w-auto mt-8 flex flex-col sm:flex-row justify-between gap-4">
            <!-- Lesson Idea -->
            <div class="sm:w-1/2">
                <h3 class="text-xl font-bold text-blue-700 mb-2">ÙÙƒØ±Ø© Ø§Ù„Ø¯Ø±Ø³</h3>
                <p class="section-text">
                    Ø£ÙƒØªØ¨ Ø­Ø¯ÙˆØ¯Ù‹Ø§ Ù…ØªØªØ§Ù„ÙŠØ©ØŒ ÙˆØ£Ø¬Ø¯ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø¹Ø§Ù… Ù„Ù‡Ø§.
                </p>
            </div>
            <!-- Vocabulary (Adjusted for LTR: border-left, text-left, padding-left) -->
            <div class="sm:w-1/2 border-l-2 border-gray-300 pl-4 text-left">
                <h3 class="text-xl font-bold text-blue-700 mb-2">Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª</h3>
                <ul class="list-disc list-inside space-y-1 pl-4">
                    <li class="section-text text-base text-gray-700 ltr-text">Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© ($Sequence$)</li>
                    <li class="section-text text-base text-gray-700 ltr-text">Ø§Ù„Ø­Ø¯ ($Term$)</li>
                    <li class="section-text text-base text-gray-700 ltr-text">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø¹Ø§Ù… ($General\ Term$)</li>
                </ul>
            </div>
        </div>

        <!-- Explore Section -->
        <div class="lesson-box w-auto">
            <h2 class="section-title border-b-2 border-gray-200 pb-2">Ø£Ø³ØªÙƒØ´Ù: Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù†Ù‚Ø·ÙŠ</h2>
            
            <!-- Visual Pattern of Dots -->
            <div class="flex flex-col sm:flex-row justify-around items-end text-center mt-4">
                
                <!-- Shape 1 (3 dots) -->
                <div class="shape">
                    <div>
                        <div class="flex justify-center"><span class="dot"></span></div>
                        <div class="flex justify-center"><span class="dot"></span><span class="dot"></span></div>
                    </div>
                    <p class="text-sm mt-2 text-gray-600 font-bold">Ø§Ù„Ø´ÙƒÙ„ (1): 3</p>
                </div>

                <!-- Shape 2 (5 dots) -->
                <div class="shape">
                    <div>
                        <div class="flex justify-center"><span class="dot"></span><span class="dot"></span></div>
                        <div class="flex justify-center"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
                    </div>
                    <p class="text-sm mt-2 text-gray-600 font-bold">Ø§Ù„Ø´ÙƒÙ„ (2): 5</p>
                </div>

                <!-- Shape 3 (7 dots) -->
                <div class="shape">
                    <div>
                        <div class="flex justify-center"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
                        <div class="flex justify-center"><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
                    </div>
                    <p class="text-sm mt-2 text-gray-600 font-bold">Ø§Ù„Ø´ÙƒÙ„ (3): 7</p>
                </div>
            </div>

            <!-- Explore Questions (Made Interactive) -->
            <div class="mt-4 p-4 bg-white rounded-lg border border-blue-200 text-left ltr-text">
                <p class="font-bold text-gray-800 mb-2 text-right">Ø£Ø¬Ø¨ Ø¹Ù† Ù…Ø§ ÙŠÙ„ÙŠ:</p>
                <ol class="list-decimal list-inside space-y-3 pl-4">
                    <li class="section-text text-lg text-right">
                        Ù…Ø§ Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆØ§Ø¦Ø± ÙÙŠ ÙƒÙ„ Ù…Ù† Ø§Ù„Ø£Ø´ÙƒØ§Ù„ 4ØŒ 5ØŒ 6ØŸ
                        <div class="flex items-center gap-4 mt-2" dir="ltr">
                            <input type="text" id="q-explore-1" class="w-full p-2 border border-gray-300 rounded-md text-left" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© (Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨: 4, 5, 6)">
                            <button onclick="checkExploreAnswer()" class="bg-blue-700 text-white p-2 rounded-md hover:bg-blue-800 transition duration-300">ØªØ­Ù‚Ù‚</button>
                        </div>
                        <div id="q-explore-feedback" class="mt-2 font-bold hidden text-right"></div>
                    </li>
                    <li class="section-text text-lg text-right">
                        ÙƒÙŠÙ Ù†Ø¬Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆØ§Ø¦Ø± ÙÙŠ Ø§Ù„Ø´ÙƒÙ„ Ø±Ù‚Ù… 24ØŸ (Ø£ÙˆØ¬Ø¯ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø¹Ø§Ù…)
                        <div class="mt-2 text-gray-600 text-right">
                            <span dir="rtl">(Ø§Ù„Ø­Ø¯ Ø§Ù„Ø¹Ø§Ù… Ù‡Ùˆ: </span> <span dir="ltr">$a_n = 2n + 1$</span><span dir="rtl">)</span>
                            <p class="font-bold text-sm text-green-600 mt-1 text-right">
                                <span dir="rtl">Ø¥Ø°Ù†: </span><span dir="ltr">$a_{24} = 2(24) + 1 = 49$</span> <span dir="rtl">Ø¯Ø§Ø¦Ø±Ø©.</span>
                            </p>
                        </div>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Definition Section -->
        <div class="definition-box">
            <h2 class="section-title text-yellow-700 border-b-2 border-yellow-300 pb-2">ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© ($Sequence$)</h2>
            <p class="section-text text-gray-700">
                Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© Ù‡ÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ ØªØªØ¨Ø¹ ØªØ±ØªÙŠØ¨Ù‹Ø§ Ù…Ø¹ÙŠÙ‘ÙÙ†Ù‹Ø§ØŒ ÙˆÙŠÙØ³Ù…Ù‘Ù‰ ÙƒÙ„ Ø¹Ø¯Ø¯ ÙÙŠÙ‡Ø§ <span class="font-bold text-red-600">Ø­Ø¯Ù‹Ø§ ($term$)</span>.
            </p>
            <p class="section-text text-gray-700 mt-2">
                ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø£Ù† Ø£ÙƒÙ…Ù„ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© Ø¥Ø°Ø§ Ø¹Ù„Ù…ØªÙ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙŠ ØªØ±Ø¨Ø· ÙƒÙ„ Ø­Ø¯ ÙÙŠ Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© Ø¨Ø§Ù„Ø­Ø¯ Ø§Ù„Ø°ÙŠ ÙŠÙ„ÙŠÙ‡.
            </p>
            
            <!-- Simple Sequence Example (2, 5, 8, 11, ...) - LTR Flow -->
            <div class="flex justify-center mt-6" dir="ltr">
                <div class="flex space-x-4 term-row">
                    <!-- Term 1 (2) needs the +3 label -->
                    <div class="term-box">
                        <span class="difference-line">$+3$</span>
                        <div class="term-number">2</div>
                        <p class="text-xs mt-1" dir="rtl">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£ÙˆÙ„</p>
                    </div>
                    <!-- Term 2 (5) needs the +3 label -->
                    <div class="term-box">
                        <span class="difference-line">$+3$</span>
                        <div class="term-number">5</div>
                        <p class="text-xs mt-1" dir="rtl">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø«Ø§Ù†ÙŠ</p>
                    </div>
                    <!-- Term 3 (8) needs the +3 label -->
                    <div class="term-box">
                        <span class="difference-line">$+3$</span>
                        <div class="term-number">8</div>
                        <p class="text-xs mt-1" dir="rtl">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø«Ø§Ù„Ø«</p>
                    </div>
                    <!-- Term 4 (11) -->
                    <div class="term-box">
                        <div class="term-number">11</div>
                        <p class="text-xs mt-1" dir="rtl">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø±Ø§Ø¨Ø¹</p>
                    </div>
                    <div class="term-box">
                        <div class="term-number">...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Example 1 Section -->
        <div class="example-card w-auto">
            <h2 class="section-title text-blue-700 border-b-2 border-gray-200 pb-2">Ù…Ø«Ø§Ù„ 1: Ù…ØªØªØ§Ù„ÙŠØ© Ø­Ø³Ø§Ø¨ÙŠØ©</h2>
            <p class="section-text font-bold mb-4">
                Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£ÙˆÙ„ ÙÙŠ Ù…ØªØªØ§Ù„ÙŠØ© Ù‡Ùˆ $4.7$ØŒ ÙˆØ§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙŠ ØªØ±Ø¨Ø· ÙƒÙ„ Ø­Ø¯ Ø¨Ø§Ù„Ø­Ø¯ Ø§Ù„Ø°ÙŠ ÙŠÙ„ÙŠÙ‡ Ù‡ÙŠ Ø·Ø±Ø­ $0.4$ØŒ ÙØ£ÙˆØ¬Ø¯ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø®Ø§Ù…Ø³.
            </p>

            <!-- Visual steps for Example 1 - LTR Flow -->
            <div class="flex justify-center mt-6" dir="ltr">
                <div class="flex space-x-4 term-row">
                    <!-- Term 1 (4.7) needs the -0.4 label -->
                    <div class="term-box">
                        <span class="difference-line">$-0.4$</span>
                        <div class="term-number bg-green-500 text-white">4.7</div>
                        <p class="text-xs mt-1" dir="rtl">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£ÙˆÙ„</p>
                    </div>
                    <!-- Term 2 (4.3) needs the -0.4 label -->
                    <div class="term-box">
                        <span class="difference-line">$-0.4$</span>
                        <div class="term-number">4.3</div>
                        <p class="text-xs mt-1" dir="rtl">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø«Ø§Ù†ÙŠ</p>
                    </div>
                    <!-- Term 3 (3.9) needs the -0.4 label -->
                    <div class="term-box">
                        <span class="difference-line">$-0.4$</span>
                        <div class="term-number">3.9</div>
                        <p class="text-xs mt-1" dir="rtl">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø«Ø§Ù„Ø«</p>
                    </div>
                    <!-- Term 4 (3.5) needs the -0.4 label -->
                    <div class="term-box">
                        <span class="difference-line">$-0.4$</span>
                        <div class="term-number">3.5</div>
                        <p class="text-xs mt-1" dir="rtl">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø±Ø§Ø¨Ø¹</p>
                    </div>
                    <!-- Term 5 (3.1) -->
                    <div class="term-box">
                        <div class="term-number bg-red-500 text-white">3.1</div>
                        <p class="text-xs mt-1" dir="rtl">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø®Ø§Ù…Ø³</p>
                    </div>
                </div>
            </div>
            <p class="section-text mt-4 text-center font-bold text-blue-800">
                Ø¥Ø°Ù†ØŒ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø®Ø§Ù…Ø³ Ù‡Ùˆ $3.1$.
            </p>
        </div>

        <!-- Check Understanding Section -->
        <div class="check-box w-auto">
            <h2 class="section-title text-green-700 border-b-2 border-green-300 pb-2">Ø£ØªØ­Ù‚Ù‚ Ù…Ù† ÙÙ‡Ù…ÙŠ</h2>
            <p class="section-text mb-4 font-bold">
                Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£ÙˆÙ„ ÙÙŠ Ù…ØªØªØ§Ù„ÙŠØ© Ù‡Ùˆ $2.6$ØŒ ÙˆØ§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙŠ ØªØ±Ø¨Ø· ÙƒÙ„ Ø­Ø¯ Ø¨Ø§Ù„Ø­Ø¯ Ø§Ù„Ø°ÙŠ ÙŠÙ„ÙŠÙ‡ Ù‡ÙŠ Ø·Ø±Ø­ $0.5$ØŒ ÙØ£ÙˆØ¬Ø¯ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø³Ø§Ø¯Ø³.
            </p>
            
            <!-- Interactive Input -->
            <div class="mt-4 flex flex-col sm:flex-row items-center gap-4" dir="ltr">
                <input type="text" id="q-check-answer" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-left" placeholder="Ø£Ø¯Ø®Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ø¯ Ø§Ù„Ø³Ø§Ø¯Ø³ (Ø¹Ø´Ø±ÙŠ)">
                <button onclick="checkSequenceAnswer()" class="bg-green-600 text-white p-2 rounded-md hover:bg-green-700 transition duration-300 transform hover:scale-105 w-full sm:w-auto">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù„</button>
            </div>
            <div id="q-check-feedback" class="mt-2 text-center font-bold hidden"></div>

            <!-- Solution Steps (Hidden by default) -->
            <button onclick="toggleSolution('solution-check')" class="mt-4 text-sm text-blue-600 hover:text-blue-800 transition duration-200">
                (Ø§Ù†Ù‚Ø± Ù„Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø­Ù„)
            </button>
            <div id="solution-check" class="p-4 mt-2 border-t border-gray-300 bg-white rounded-lg" style="display:none;">
                <h4 class="font-bold text-blue-700 mb-2">Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø­Ù„ Ù„Ø¥ÙŠØ¬Ø§Ø¯ $a_6$:</h4>
                <ol class="list-decimal list-inside space-y-1 pr-4 text-gray-700">
                    <li dir="ltr" class="ltr-text">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£ÙˆÙ„ $a_1 = 2.6$</li>
                    <li dir="ltr" class="ltr-text">$a_2 = 2.6 - 0.5 = 2.1$</li>
                    <li dir="ltr" class="ltr-text">$a_3 = 2.1 - 0.5 = 1.6$</li>
                    <li dir="ltr" class="ltr-text">$a_4 = 1.6 - 0.5 = 1.1$</li>
                    <li dir="ltr" class="ltr-text">$a_5 = 1.1 - 0.5 = 0.6$</li>
                    <li dir="ltr" class="ltr-text">$a_6 = 0.6 - 0.5 = 0.1$</li>
                </ol>
                <p class="mt-2 font-bold text-lg text-green-600">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø³Ø§Ø¯Ø³ Ù‡Ùˆ $0.1$</p>
            </div>
        </div>
        
        <!-- Professional Footer (Deep Indigo) -->
        <footer class="bg-[#1e3a8a] text-white p-4 text-center mt-8">
            <p class="text-sm">ØªÙ… Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø¨Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ù†ÙŠÙ„ÙŠ Ø§Ù„Ù…Ù„ÙƒÙŠ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025</p>
        </footer>
    </main>
    
    <!-- JavaScript for interactivity and math rendering -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Initialize KaTeX auto-render for all math expressions delimited by $
            renderMathInElement(document.body, {
                ignoreHtmlTags: ["script", "noscript", "style", "textarea"], 
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false},
                ],
                throwOnError: false
            });

            // Function to normalize user input (handle mixed fractions, commas, etc.)
            function normalizeInput(input) {
                // Replace Arabic and Persian digits with Western digits
                const normalized = input
                    .replace(/ØŒ/g, '.') 
                    .replace(/,/g, '.') 
                    .replace(/ /g, '') 
                    .replace(/[\u0660-\u0669]/g, function (d) {
                        return d.charCodeAt(0) - 0x0660;
                    })
                    .replace(/[\u06f0-\u06f9]/g, function (d) {
                        return d.charCodeAt(0) - 0x06f0;
                    });
                
                return parseFloat(normalized);
            }

            // Function to check the Explore section answer (9, 11, 13)
            window.checkExploreAnswer = function() {
                const inputElement = document.getElementById('q-explore-1');
                const feedbackElement = document.getElementById('q-explore-feedback');
                // Allow input separated by comma, space, or Arabic comma
                const userAnswerText = inputElement.value.split(/[ ,ØŒ]/).filter(s => s.trim() !== '');
                
                const correctAnswers = ["9", "11", "13"];
                let isCorrect = false;

                if (userAnswerText.length === 3 && 
                    userAnswerText[0].trim() === correctAnswers[0] &&
                    userAnswerText[1].trim() === correctAnswers[1] &&
                    userAnswerText[2].trim() === correctAnswers[2]) {
                    isCorrect = true;
                }
                
                feedbackElement.style.display = 'block';
                if (isCorrect) {
                    feedbackElement.textContent = "Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø§Ù„Ù†Ù…Ø· ÙŠØ²ÙŠØ¯ Ø¨Ù…Ù‚Ø¯Ø§Ø± 2 ÙÙŠ ÙƒÙ„ Ù…Ø±Ø©.";
                    feedbackElement.className = "mt-2 font-bold text-green-600 text-right";
                } else {
                    feedbackElement.textContent = "Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ: 9, 11, 13. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!";
                    feedbackElement.className = "mt-2 font-bold text-red-600 text-right";
                }
            };
            
            // Function to check the Check Understanding answer (0.1)
            window.checkSequenceAnswer = function() {
                const inputElement = document.getElementById('q-check-answer');
                const feedbackElement = document.getElementById('q-check-feedback');
                const userAnswer = normalizeInput(inputElement.value);

                // Correct answer for a_6 = 2.6 - 5 * 0.5 = 0.1
                const correctAnswer = 0.1;
                
                feedbackElement.style.display = 'block';
                if (!isNaN(userAnswer) && Math.abs(userAnswer - correctAnswer) < 0.001) {
                    feedbackElement.textContent = "Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø§Ù„Ø­Ø¯ Ø§Ù„Ø³Ø§Ø¯Ø³ Ù‡Ùˆ 0.1 ğŸ‰";
                    feedbackElement.className = "mt-2 font-bold text-green-600";
                } else {
                    feedbackElement.textContent = "Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„ØµØ­ÙŠØ­ Ù‡Ùˆ 0.1. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ ØªØ·Ø±Ø­ 0.5 Ø®Ù…Ø³ Ù…Ø±Ø§Øª.";
                    feedbackElement.className = "mt-2 font-bold text-red-600";
                }
            };
            
            // Function to toggle solution visibility
            window.toggleSolution = function(id) {
                const solution = document.getElementById(id);
                solution.style.display = (solution.style.display === 'none' || solution.style.display === '') ? 'block' : 'none';
            };
        });
    </script>
</body>
</html>