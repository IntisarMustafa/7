<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„ÙƒØ³ÙˆØ± Ø§Ù„Ø¹Ø´Ø±ÙŠØ© Ø§Ù„Ø¯ÙˆØ±ÙŠØ© - Ù…Ø«Ø§Ù„ Ù…Ù† Ø§Ù„Ø­ÙŠØ§Ø©</title>
    <!-- Tailwind CSS for styling and responsiveness -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- KaTeX for beautiful math symbols -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" xintegrity="sha384-GvrxHw+z4q/RzL05jQ9N+q+1aVl2Zl9x0+hX2jY5wF+R+b0eR-z-n-q-3X-z-Xl-Q==" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" xintegrity="sha384-H4uW3s3eT2B2+xP9O/D4h5N6n7f7p5O9Pq2E0l7l2lFw/F0e2+Q==" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js" xintegrity="sha384-i1HVh8p/B/pQ2Cg3t/r/O/3tP2Cj+xG/2+lCg5b+lC+b+c+a+v+1/u+s/g==" crossorigin="anonymous"></script>

    <style>
        /* Import suitable fonts for Arabic and English text */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+Arabic:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans Arabic', 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: #eef2f6;
        }

        /* Set base styles for the body and the main container */
        .container {
            width: 100%;
            max-width: 900px;
            background-color: #fff;
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin: 2rem auto;
            flex-grow: 1;
        }

        /* Main title and lesson idea sections */
        .lesson-idea-box {
            background-color: #e0f2fe;
            border-left: 6px solid #084c8f;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #084c8f;
            margin-bottom: 0.75rem;
        }
        .section-text {
            font-size: 1.15rem; /* Adjusted for better mobile reading */
            line-height: 1.7;
            color: #4a5568;
        }
        
        /* Typography and layout for math expressions */
        .equation {
            font-size: 1.6rem;
            font-weight: bold;
            color: #2d3748;
            text-align: right;
            line-height: 1.8;
            margin: 1rem 0;
            direction: ltr; /* Ensure math block is LTR */
        }
        .explanation {
            font-size: 0.95rem;
            color: #718096;
            margin-bottom: 0.5rem;
            text-align: right;
        }

        /* The main steps of the solution with a modern, split layout */
        .step-row {
            display: flex;
            align-items: stretch;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px dashed #e2e8f0;
            flex-wrap: wrap-reverse;
        }
        .step-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .algebra-col, .model-col {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 1rem;
            border-radius: 0.75rem;
        }
        .algebra-col {
            background-color: #f7fafc;
        }
        .model-col {
            background-color: #f0f4f8;
            border-left: 3px solid #cbd5e0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        /* Check Understanding section and interactivity */
        .check-understanding-box {
            background-color: #fff8eb;
            border: 1px solid #fcd34d; /* Yellow border */
            border-radius: 1rem;
            padding: 2rem;
            margin-top: 2.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .problem-input {
            width: 100%;
            padding: 0.75rem;
            font-size: 1.25rem;
            border: 1px solid #ccc;
            border-radius: 0.5rem;
            text-align: center;
        }
        
        /* Summary section for the final calculation */
        .summary-box {
            background-color: #d1e7dd;
            border-left: 6px solid #198754;
            border-radius: 1rem;
            padding: 2rem;
            margin-top: 2.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .math-expr-summary {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2d3748;
            direction: ltr;
            display: inline-block;
            margin-left: 0.5rem;
        }

        /* Responsive design for smaller screens */
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
            }
            .step-row {
                flex-direction: column;
                align-items: center;
                gap: 1.5rem;
            }
            .algebra-col, .model-col {
                width: 100%;
                padding: 1.2rem;
                border-left: none;
            }
            .model-col {
                order: -1;
                border-bottom: 3px solid #cbd5e0;
                border-left: none;
            }
            .equation {
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Main Content Container -->
    <main class="container">
        <!-- Professional Header -->
        <header class="bg-blue-800 text-white py-12 sm:py-16 text-center shadow-lg rounded-t-[1.5rem] relative overflow-hidden">
            <!-- Decorative gold bar at the bottom -->
            <div class="absolute inset-x-0 bottom-0 h-1 bg-yellow-400"></div>
            <!-- Font size reduced from text-4xl/sm:text-5xl to text-3xl/sm:text-4xl -->
            <h1 class="text-3xl leading-tight sm:text-4xl font-bold">Ø§Ù„ÙƒØ³ÙˆØ± Ø§Ù„Ø¹Ø´Ø±ÙŠØ© Ø§Ù„Ø¯ÙˆØ±ÙŠØ© - ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù…Ù„ÙŠ</h1>
        </header>

        <!-- Lesson Idea Section -->
        <div class="lesson-idea-box w-full mt-8">
            <h2 class="section-title">Ù…Ù‚Ø¯Ù…Ø©</h2>
            <p class="section-text">
                ØªÙÙˆØ¬ÙØ¯ ÙƒØ³ÙˆØ±ÙŒ Ø¹Ø´Ø±ÙŠØ© Ø¯ÙˆØ±ÙŠØ© ÙŠØªÙƒØ±Ù‘Ø± ÙÙŠÙ‡Ø§ Ø±Ù‚Ù…Ø§Ù† Ø£Ùˆ Ø£ÙƒØ«Ø±ØŒ ÙˆÙŠÙ…ÙƒÙ†Ù†Ø§ Ø£ÙŠØ¶Ø§Ù‹ ÙƒØªØ§Ø¨Ø© Ù‡Ø°Ù‡ Ø§Ù„ÙƒØ³ÙˆØ± Ø§Ù„Ø¹Ø´Ø±ÙŠØ© Ø§Ù„Ø¯ÙˆØ±ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© <span class="math-expr" dir="ltr">$\frac{a}{b}$</span>.
            </p>
            <h3 class="font-bold text-lg mt-4 text-blue-700">Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª</h3>
            <ul class="list-disc pr-8 text-lg text-gray-700">
                <li>ÙƒØ³Ø± Ø¹Ø´Ø±ÙŠ Ø¯ÙˆØ±ÙŠ</li>
                <li>ØµÙˆØ±Ø© ÙƒØ³Ø± <span class="math-expr" dir="ltr">$\frac{a}{b}$</span></li>
            </ul>
        </div>

        <!-- Example section with the new styling and layout -->
        <div class="bg-amber-100 text-amber-900 p-6 rounded-lg my-8 flex flex-col items-center shadow-md">
            <h2 class="section-title text-center text-amber-900">
                Ù…Ø«Ø§Ù„ 2: Ù…Ù† Ø§Ù„Ø­ÙŠØ§Ø©
            </h2>
            <p class="section-text text-center mt-2">
                ØªÙ‚Ø¯Ù… <span class="math-expr" dir="ltr">$66$</span> Ø·Ø§Ù„Ø¨Ù‹Ø§ Ø¥Ù„Ù‰ Ø§Ù…ØªØ­Ø§Ù† ÙÙŠ Ù…Ø§Ø¯Ø© Ø§Ù„Ø¹Ù„ÙˆÙ…ØŒ ÙÙƒØ§Ù† Ø§Ù„ÙƒØ³Ø± Ø§Ù„Ø¹Ø´Ø±ÙŠ Ø§Ù„Ø¯Ø§Ù„Ù‘ Ø¹Ù„Ù‰ Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ <span class="math-expr" dir="ltr">$0.\overline{81}$</span>. Ø£ÙØ¬ÙØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø§Ø¬Ø­ÙŠÙ†.
            </p>
        </div>
        
        <!-- The main steps of the solution: Converting the repeating decimal -->
        <h3 class="text-2xl font-bold text-gray-800 mb-6 text-right">Ø£ÙˆÙ„Ø§Ù‹: ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙƒØ³Ø± Ø§Ù„Ø¹Ø´Ø±ÙŠ Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø¹Ù„Ù‰ ØµÙˆØ±Ø© ÙƒØ³Ø± <span class="math-expr" dir="ltr">$\frac{a}{b}$</span></h3>

        <!-- Step 1: Define x and Multiply by 100 -->
        <div class="step-row">
            <div class="algebra-col">
                <div class="explanation">Ø£Ø¹ÙˆÙ‘Ø¶ Ø¹Ù† Ø§Ù„ÙƒØ³Ø± Ø§Ù„Ø¹Ø´Ø±ÙŠ Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø¨Ù…ØªØºÙŠØ± Ù…Ø«Ù„ <span class="math-expr" dir="ltr">$x$</span>ØŒ Ø«Ù… Ø£Ù‚ÙˆÙ… Ø¨Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¢ØªÙŠØ©:</div>
                <div class="equation"><span class="math-expr" dir="ltr">$x = 0.\overline{81}$</span></div>
                <div class="equation"><span class="math-expr" dir="ltr">$x = 0.8181\ldots$</span></div>
                <div class="explanation mt-4">Ø§Ø¶Ø±Ø¨ Ø·Ø±ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© ÙÙŠ <span class="math-expr" dir="ltr">$100$</span>ØŒ Ù„Ø£Ù† Ù…Ù†Ø²Ù„ØªÙŠÙ† ØªØªÙƒØ±Ø±Ø§Ù†</div>
                <div class="equation"><span class="math-expr" dir="ltr">$100x = 100(0.8181\ldots)$</span></div>
                <div class="equation"><span class="math-expr" dir="ltr">$100x = 81.8181\ldots$</span></div>
            </div>
            <div class="model-col">
                <div class="explanation font-bold text-blue-800">Ø§Ø¶Ø±Ø¨ ÙÙŠ <span class="math-expr" dir="ltr">$100$</span>ØŒ Ø£Ø­Ø±Ù‘Ùƒ Ø§Ù„ÙØ§ØµÙ„Ø© Ù…Ù†Ø²Ù„ØªÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ†.</div>
                <div class="mt-4 p-4 bg-white rounded-lg shadow-inner border border-blue-200">
                    <span class="math-expr text-lg" dir="ltr">$0.8181\ldots \xrightarrow{\times 100} 81.8181\ldots$</span>
                </div>
            </div>
        </div>

        <!-- Step 2: Rewrite the equation and Substitute x -->
        <div class="step-row">
            <div class="algebra-col">
                <div class="explanation">Ø£Ø¬Ø²Ù‘Ø¦ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ø´Ø±ÙŠ Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ ØµØ­ÙŠØ­ ÙˆÙƒØ³Ø± Ø¹Ø´Ø±ÙŠ</div>
                <div class="equation"><span class="math-expr" dir="ltr">$81.8181\ldots = 81 + 0.8181\ldots$</span></div>
                <div class="explanation mt-4">Ø¹ÙˆÙ‘Ø¶ Ø¨Ø§Ù„Ù…ØªØºÙŠØ± <span class="math-expr" dir="ltr">$x$</span></div>
                <div class="equation"><span class="math-expr" dir="ltr">$100x = 81 + x$</span></div>
            </div>
            <div class="model-col">
                 <div class="explanation font-bold text-blue-800">Ø¹ÙˆÙ‘Ø¶ Ø¹Ù† <span class="math-expr" dir="ltr">$0.8181\ldots$</span> Ø¨Ø§Ù„Ù…ØªØºÙŠØ± <span class="math-expr" dir="ltr">$x$</span> Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</div>
                 <div class="mt-4 p-4 bg-white rounded-lg shadow-inner border border-blue-200">
                    <span class="math-expr text-2xl font-extrabold" dir="ltr">$100x = 81 + x$</span>
                </div>
            </div>
        </div>

        <!-- Step 3: Solve for x and Simplify -->
        <div class="step-row">
            <div class="algebra-col">
                <div class="explanation">Ø§Ø·Ø±Ø­ <span class="math-expr" dir="ltr">$x$</span> Ù…Ù† ÙƒÙ„Ø§ Ø§Ù„Ø·Ø±ÙÙŠÙ†</div>
                <div class="equation"><span class="math-expr" dir="ltr">$100x - x = 81 + x - x$</span></div>
                <div class="equation"><span class="math-expr" dir="ltr">$99x = 81$</span></div>
                <div class="explanation mt-4">Ø§Ù‚Ø³Ù… ÙƒÙ„Ø§ Ø§Ù„Ø·Ø±ÙÙŠÙ† Ø¹Ù„Ù‰ <span class="math-expr" dir="ltr">$99$</span></div>
                <div class="equation"><span class="math-expr" dir="ltr">$x = \frac{81}{99}$</span></div>
                <div class="explanation mt-4">Ø£ÙƒØªØ¨ Ø§Ù„Ù†Ø§ØªØ¬ ÙÙŠ Ø£Ø¨Ø³Ø· ØµÙˆØ±Ø© (Ø¨Ø§Ù„Ù‚Ø³Ù…Ø© Ø¹Ù„Ù‰ <span class="math-expr" dir="ltr">$9$</span>)</div>
                <div class="equation"><span class="math-expr" dir="ltr">$x = \frac{9}{11}$</span></div>
            </div>
            <div class="model-col">
                <div class="explanation font-bold text-blue-800">Ø§Ù„ÙƒØ³Ø± Ø§Ù„Ø¹Ø´Ø±ÙŠ Ø§Ù„Ø¯ÙˆØ±ÙŠ <span class="math-expr" dir="ltr">$\mathbf{0.\overline{81}}$</span> ÙŠØ³Ø§ÙˆÙŠ Ø§Ù„ÙƒØ³Ø± <span class="math-expr" dir="ltr">$\mathbf{\frac{9}{11}}$</span></div>
                <div class="mt-4 p-4 bg-white rounded-lg shadow-inner border border-blue-200">
                    <span class="math-expr text-2xl font-extrabold" dir="ltr">$0.\overline{81} = \frac{9}{11}$</span>
                </div>
            </div>
        </div>
        
        <!-- Application Summary -->
        <h3 class="text-2xl font-bold text-gray-800 mb-6 mt-10 text-right">Ø«Ø§Ù†ÙŠØ§Ù‹: Ø¥ÙŠØ¬Ø§Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù†Ø§Ø¬Ø­ÙŠÙ†</h3>

        <div class="summary-box">
            <p class="section-text">
                Ù„Ø¥ÙŠØ¬Ø§Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø© Ø§Ù„Ù†Ø§Ø¬Ø­ÙŠÙ†ØŒ Ù†Ø¶Ø±Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø© Ø§Ù„ÙƒÙ„ÙŠ ÙÙŠ Ø§Ù„ÙƒØ³Ø± Ø§Ù„Ø¯Ø§Ù„ Ø¹Ù„Ù‰ Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­:
            </p>
            <div class="text-center mt-4">
                <span class="math-expr-summary" dir="ltr">$\text{Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø§Ø¬Ø­ÙŠÙ†} = 66 \times \frac{9}{11}$</span>
            </div>
            <div class="text-center mt-4">
                <span class="math-expr-summary" dir="ltr">$66 \times \frac{9}{11} = 6 \times 9 = 54$</span>
            </div>
            <p class="section-text font-bold text-green-800 mt-4 text-center">
                Ø¥Ø°ÙÙ†Ù’ØŒ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø© Ø§Ù„Ù†Ø§Ø¬Ø­ÙŠÙ† Ù‡Ùˆ <span class="math-expr" dir="ltr">$54$</span> Ø·Ø§Ù„Ø¨Ø§Ù‹.
            </p>
        </div>

        <!-- Check Understanding Section -->
        <div class="check-understanding-box">
            <h2 class="section-title">Ø£ØªØ­Ù‚Ù‚ Ù…Ù† ÙÙ‡Ù…ÙŠ</h2>
            <p class="section-text mb-6">
                Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¹Ø¯Ø¯ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø¬Ù…ÙŠØ¹Ù‡Ø§ ÙÙŠ Ø§Ù„Ø­Ø¯ÙŠÙ‚Ø© <span class="math-expr" dir="ltr">$88$</span> Ø­ÙŠÙˆØ§Ù†Ø§Ù‹ØŒ ÙˆØ§Ù„ÙƒØ³Ø± Ø§Ù„Ø¯Ø§Ù„Ù‘ Ø¹Ù„Ù‰ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„Ù…ÙØªØ±Ø³Ø© ÙÙŠÙ‡Ø§ <span class="math-expr" dir="ltr">$0.\overline{18}$</span>ØŒ ÙØ£ÙØ¬ÙØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„Ù…ÙØªØ±Ø³Ø©.
            </p>
            
            <!-- Interactive Problem Area -->
            <div class="bg-white p-6 rounded-lg shadow-inner border border-gray-200">
                <h3 class="text-lg font-bold text-blue-700 mb-4">Ø®Ø·ÙˆØ© 1: ØªØ­ÙˆÙŠÙ„ <span class="math-expr" dir="ltr">$0.\overline{18}$</span> Ø¥Ù„Ù‰ ÙƒØ³Ø± <span class="math-expr" dir="ltr">$\frac{a}{b}$</span></h3>
                <div class="flex items-center justify-center gap-4 mb-6">
                    <div class="flex flex-col items-center w-40">
                        <input type="text" id="q-numerator" class="problem-input border-gray-300 focus:ring-blue-500" placeholder="Ø§Ù„Ø¨Ø³Ø·">
                        <div class="fraction-line w-full"></div>
                        <input type="text" id="q-denominator" class="problem-input border-gray-300 focus:ring-blue-500" placeholder="Ø§Ù„Ù…Ù‚Ø§Ù…">
                    </div>
                    <button onclick="checkFraction()" class="bg-green-600 text-white p-3 rounded-md hover:bg-green-700 transition duration-300 transform hover:scale-105">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒØ³Ø±</button>
                </div>
                <div id="q-fraction-feedback" class="mt-2 text-center font-bold mb-6" style="display:none;"></div>
                
                <h3 class="text-lg font-bold text-blue-700 mb-4">Ø®Ø·ÙˆØ© 2: Ø¥ÙŠØ¬Ø§Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„Ù…ÙØªØ±Ø³Ø©</h3>
                <div class="flex items-center justify-center gap-4">
                    <input type="text" id="q-result" class="problem-input border-gray-300 focus:ring-blue-500 w-40" placeholder="Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©">
                    <button onclick="checkResult()" class="bg-blue-600 text-white p-3 rounded-md hover:bg-blue-700 transition duration-300 transform hover:scale-105">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¹Ø¯Ø¯</button>
                </div>
                <div id="q-result-feedback" class="mt-2 text-center font-bold" style="display:none;"></div>
            </div>

        </div>
        
        <!-- Updated Navigation Buttons -->
        <div class="flex justify-between mt-8">
            <!-- Previous Button -->
            <a href="u3l2p2.html" class="bg-gray-400 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gray-500 transition duration-300 transform hover:scale-105 text-lg">
                Ø§Ù„Ø³Ø§Ø¨Ù‚
            </a>
            <!-- Next Button -->
            <a href="u3l2p3.html" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-blue-700 transition duration-300 transform hover:scale-105 text-lg">
                Ø§Ù„ØªØ§Ù„ÙŠ
            </a>
        </div>
        
        <!-- Divider to separate the button and the footer -->
        <div class="w-full h-1 bg-gray-200 my-8"></div>

        <!-- Professional Footer -->
        <footer class="bg-blue-800 text-white p-4 text-center rounded-b-[1.5rem]">
            <p class="text-sm">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025</p>
        </footer>
    </main>
    
    <!-- JavaScript for interactivity and rendering math -->
    <script>
        // Helper function to calculate GCD (Ø§Ù„Ù‚Ø§Ø³Ù… Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ø§Ù„Ø£ÙƒØ¨Ø±)
        function gcd(a, b) {
            return b ? gcd(b, a % b) : a;
        }

        // Helper function to simplify a fraction
        function simplifyFraction(numerator, denominator) {
            const common = gcd(Math.abs(numerator), Math.abs(denominator));
            return {
                num: numerator / common,
                den: denominator / common
            };
        }

        document.addEventListener("DOMContentLoaded", function() {
            // Function to render all math expressions on the page
            function renderAllMath() {
                // Render expressions using .math-expr
                document.querySelectorAll('.math-expr, .math-expr-summary').forEach(function(element) {
                    try {
                        // KaTeX expects the expression without the surrounding $
                        // We correctly strip the leading and trailing '$'.
                        const expression = element.textContent.trim().replace(/^\$/, '').replace(/\$$/, '');
                        
                        // Check if the element already has rendered KaTeX content to avoid double rendering
                        if (element.querySelector('.katex')) return; 

                        katex.render(expression, element, {
                            throwOnError: false,
                            displayMode: false // Inline mode
                        });
                    } catch(e) {
                        console.error("KaTeX rendering error:", e);
                    }
                });
            }

            // Initial rendering of all math
            renderAllMath();

            const tolerance = 0.0000001; 

            // --- Check Fraction Logic for Q. 'Ø£ØªØ­Ù‚Ù‚ Ù…Ù† ÙÙ‡Ù…ÙŠ' ---
            window.checkFraction = function() {
                const numeratorInput = document.getElementById(`q-numerator`);
                const denominatorInput = document.getElementById(`q-denominator`);
                const feedbackElement = document.getElementById(`q-fraction-feedback`);
                
                const userNumerator = parseInt(numeratorInput.value.trim());
                const userDenominator = parseInt(denominatorInput.value.trim());
                
                // Correct simplified fraction for 0.18 bar (18/99 simplified to 2/11)
                const correctNum = 2;
                const correctDen = 11;
                const correctFractionKaTeX = "\\frac{2}{11}"; 
                
                feedbackElement.style.display = 'block';

                if (isNaN(userNumerator) || isNaN(userDenominator) || userDenominator === 0) {
                    feedbackElement.textContent = "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© ÙÙŠ Ø§Ù„Ø¨Ø³Ø· ÙˆØ§Ù„Ù…Ù‚Ø§Ù….";
                    feedbackElement.className = "mt-2 text-center font-bold text-orange-600";
                    return;
                } 
                
                // Check if the fraction value is correct
                const correctValue = 18 / 99; // 0.181818...
                const userValue = userNumerator / userDenominator;

                if (Math.abs(userValue - correctValue) < tolerance) {
                    // Check if it is the simplified form
                    const simplified = simplifyFraction(userNumerator, userDenominator);
                    
                    if (simplified.num === correctNum && simplified.den === correctDen) {
                        feedbackElement.textContent = "Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ÙˆÙ…Ø¨Ø³Ù‘Ø·Ø©! ğŸ‰ Ø§Ù„ÙƒØ³Ø± Ù‡Ùˆ 2/11.";
                        feedbackElement.className = "mt-2 text-center font-bold text-green-600";
                    } else {
                        // Correct value but not simplified
                        const textNode1 = document.createTextNode("Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© Ø§Ù„Ù‚ÙŠÙ…Ø©ØŒ Ù„ÙƒÙ†Ù‡Ø§ Ù„ÙŠØ³Øª ÙÙŠ Ø£Ø¨Ø³Ø· ØµÙˆØ±Ø©. Ø£Ø¨Ø³Ø· ØµÙˆØ±Ø© Ù‡ÙŠ ");
                        const katexSpan = document.createElement('span');
                        katexSpan.setAttribute('dir', 'ltr');
                        try {
                            katex.render(correctFractionKaTeX, katexSpan, { throwOnError: false });
                        } catch(e) {
                            katexSpan.textContent = "2/11";
                        }
                        feedbackElement.innerHTML = '';
                        feedbackElement.appendChild(textNode1);
                        feedbackElement.appendChild(katexSpan);
                        feedbackElement.className = "mt-2 text-center font-bold text-blue-600";
                    }

                } else {
                    // Incorrect value
                    // Clear previous content
                    feedbackElement.innerHTML = '';
                    
                    const textNode1 = document.createTextNode("Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„ÙƒØ³Ø± Ø§Ù„ØµØ­ÙŠØ­ ÙÙŠ Ø£Ø¨Ø³Ø· ØµÙˆØ±Ø© Ù‡Ùˆ ");
                    const katexSpan = document.createElement('span');
                    katexSpan.setAttribute('dir', 'ltr');
                    try {
                        katex.render(correctFractionKaTeX, katexSpan, { throwOnError: false });
                    } catch(e) {
                        katexSpan.textContent = "2/11";
                    }
                    
                    feedbackElement.appendChild(textNode1);
                    feedbackElement.appendChild(katexSpan);
                    feedbackElement.className = "mt-2 text-center font-bold text-red-600";
                }
            };

            // --- Check Result Logic for Q. 'Ø£ØªØ­Ù‚Ù‚ Ù…Ù† ÙÙ‡Ù…ÙŠ' ---
            window.checkResult = function() {
                const resultInput = document.getElementById(`q-result`);
                const feedbackElement = document.getElementById(`q-result-feedback`);
                
                const userResult = parseInt(resultInput.value.trim());
                
                // Calculation: 88 * (2/11) = 88 / 11 * 2 = 8 * 2 = 16
                const correctResult = 16;
                
                feedbackElement.style.display = 'block';

                if (isNaN(userResult)) {
                    feedbackElement.textContent = "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ø¯Ø¯ ØµØ­ÙŠØ­.";
                    feedbackElement.className = "mt-2 text-center font-bold text-orange-600";
                } else if (userResult === correctResult) {
                    feedbackElement.textContent = `Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø¹Ø¯Ø¯ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„Ù…ÙØªØ±Ø³Ø© Ù‡Ùˆ ${correctResult} Ø­ÙŠÙˆØ§Ù†Ø§Ù‹. ğŸ‰`;
                    feedbackElement.className = "mt-2 text-center font-bold text-green-600";
                } else {
                    // Create a KaTeX representation of the correct answer and the equation
                    const correctResultKaTeX = `\\mathbf{${correctResult}}\\text{ (${88} \\times \\frac{2}{11})}`;
                    
                    feedbackElement.innerHTML = 'Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„Ø­Ù„ Ø§Ù„ØµØ­ÙŠØ­ Ù‡Ùˆ ';

                    const katexSpan = document.createElement('span');
                    katexSpan.setAttribute('dir', 'ltr');
                    try {
                        // Render the correct result with the calculation note
                        katex.render(correctResultKaTeX, katexSpan, { throwOnError: false });
                    } catch(e) {
                        katexSpan.textContent = `${correctResult}. (88 x 2/11)`; // Fallback text
                    }
                    
                    feedbackElement.appendChild(katexSpan);
                    feedbackElement.className = "mt-2 text-center font-bold text-red-600";
                }
            };
        });
    </script>
</body>
</html>

